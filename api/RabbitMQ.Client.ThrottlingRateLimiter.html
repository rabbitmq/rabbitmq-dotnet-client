<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
      <title>Class ThrottlingRateLimiter </title>
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <meta name="title" content="Class ThrottlingRateLimiter ">
      
      <meta name="description" content="A rate limiter that controls the rate of operations by limiting concurrency and applying delays when a specified threshold of concurrency usage is reached. The delay algorithm checks the current available permits from the concurrency limiter. If the available permits are greater than or equal to the throttling threshold, no delay is applied.  Otherwise, it calculates a delay based on the percentage of permits used, scaling it up to a maximum of 1000 milliseconds.">
      <link rel="icon" href="../favicon.ico">
      <link rel="stylesheet" href="../public/docfx.min.css">
      <link rel="stylesheet" href="../public/main.css">
      <meta name="docfx:navrel" content="../toc.html">
      <meta name="docfx:tocrel" content="toc.html">
      
      <meta name="docfx:rel" content="../">
      
      
      <meta name="docfx:docurl" content="https://github.com/rabbitmq/rabbitmq-dotnet-client/new/gh-pages/api/new?filename=RabbitMQ_Client_ThrottlingRateLimiter.md&amp;value=---%0Auid%3A%20RabbitMQ.Client.ThrottlingRateLimiter%0Asummary%3A%20&#39;*You%20can%20override%20summary%20for%20the%20API%20here%20using%20*MARKDOWN*%20syntax&#39;%0A---%0A%0A*Please%20type%20below%20more%20information%20about%20this%20API%3A*%0A%0A">
      <meta name="loc:inThisArticle" content="In this article">
      <meta name="loc:searchResultsCount" content="{count} results for &quot;{query}&quot;">
      <meta name="loc:searchNoResults" content="No results for &quot;{query}&quot;">
      <meta name="loc:tocFilter" content="Filter by title">
      <meta name="loc:nextArticle" content="Next">
      <meta name="loc:prevArticle" content="Previous">
      <meta name="loc:themeLight" content="Light">
      <meta name="loc:themeDark" content="Dark">
      <meta name="loc:themeAuto" content="Auto">
      <meta name="loc:changeTheme" content="Change theme">
      <meta name="loc:copy" content="Copy">
      <meta name="loc:downloadPdf" content="Download PDF">

      <script type="module" src="./../public/docfx.min.js"></script>

      <script>
        const theme = localStorage.getItem('theme') || 'auto'
        document.documentElement.setAttribute('data-bs-theme', theme === 'auto' ? (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light') : theme)
      </script>

  </head>

  <body class="tex2jax_ignore" data-layout="" data-yaml-mime="ManagedReference">
    <header class="bg-body border-bottom">
      <nav id="autocollapse" class="navbar navbar-expand-md" role="navigation">
        <div class="container-xxl flex-nowrap">
          <a class="navbar-brand" href="../index.html">
            <img id="logo" class="svg" src="../projects/RabbitMQ.Client/icon.png" alt="">
            
          </a>
          <button class="btn btn-lg d-md-none border-0" type="button" data-bs-toggle="collapse" data-bs-target="#navpanel" aria-controls="navpanel" aria-expanded="false" aria-label="Toggle navigation">
            <i class="bi bi-three-dots"></i>
          </button>
          <div class="collapse navbar-collapse" id="navpanel">
            <div id="navbar">
              <form class="search" role="search" id="search">
                <i class="bi bi-search"></i>
                <input class="form-control" id="search-query" type="search" disabled="" placeholder="Search" autocomplete="off" aria-label="Search">
              </form>
            </div>
          </div>
        </div>
      </nav>
    </header>

    <main class="container-xxl">
      <div class="toc-offcanvas">
        <div class="offcanvas-md offcanvas-start" tabindex="-1" id="tocOffcanvas" aria-labelledby="tocOffcanvasLabel">
          <div class="offcanvas-header">
            <h5 class="offcanvas-title" id="tocOffcanvasLabel">Table of Contents</h5>
            <button type="button" class="btn-close" data-bs-dismiss="offcanvas" data-bs-target="#tocOffcanvas" aria-label="Close"></button>
          </div>
          <div class="offcanvas-body">
            <nav class="toc" id="toc"></nav>
          </div>
        </div>
      </div>

      <div class="content">
        <div class="actionbar">
          <button class="btn btn-lg border-0 d-md-none" type="button" data-bs-toggle="offcanvas" data-bs-target="#tocOffcanvas" aria-controls="tocOffcanvas" aria-expanded="false" aria-label="Show table of contents">
            <i class="bi bi-list"></i>
          </button>

          <nav id="breadcrumb"></nav>
        </div>

        <article data-uid="RabbitMQ.Client.ThrottlingRateLimiter">



  <h1 id="RabbitMQ_Client_ThrottlingRateLimiter" data-uid="RabbitMQ.Client.ThrottlingRateLimiter" class="text-break">
Class ThrottlingRateLimiter  <a class="header-action link-secondary" title="View source" href="https://github.com/rabbitmq/rabbitmq-dotnet-client/blob/main/projects/RabbitMQ.Client/ThrottlingRateLimiter.cs/#L47"><i class="bi bi-code-slash"></i></a>
  </h1>

  <div class="facts text-secondary">
    <dl><dt>Namespace</dt><dd><a class="xref" href="RabbitMQ.html">RabbitMQ</a>.<a class="xref" href="RabbitMQ.Client.html">Client</a></dd></dl>
  <dl><dt>Assembly</dt><dd>RabbitMQ.Client.dll</dd></dl>
  </div>

  <div class="markdown summary"><p>A rate limiter that controls the rate of operations by limiting concurrency and applying delays
when a specified threshold of concurrency usage is reached.</p>
<p>The delay algorithm checks the current available permits from the concurrency limiter. If the available permits are greater than or equal
to the throttling threshold, no delay is applied.  Otherwise, it calculates a delay based on the percentage of permits used,
scaling it up to a maximum of 1000 milliseconds.</p>
</div>
  <div class="markdown conceptual"></div>

  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public class ThrottlingRateLimiter : RateLimiter, IAsyncDisposable, IDisposable</code></pre>
  </div>




  <dl class="typelist inheritance">
    <dt>Inheritance</dt>
    <dd>
      <div><a class="xref" href="https://learn.microsoft.com/dotnet/api/system.object">object</a></div>
      <div><a class="xref" href="https://learn.microsoft.com/dotnet/api/system.threading.ratelimiting.ratelimiter">RateLimiter</a></div>
      <div><span class="xref">ThrottlingRateLimiter</span></div>
    </dd>
  </dl>

  <dl class="typelist implements">
    <dt>Implements</dt>
    <dd>
      <div><a class="xref" href="https://learn.microsoft.com/dotnet/api/system.iasyncdisposable">IAsyncDisposable</a></div>
      <div><a class="xref" href="https://learn.microsoft.com/dotnet/api/system.idisposable">IDisposable</a></div>
    </dd>
  </dl>


  <dl class="typelist inheritedMembers">
    <dt>Inherited Members</dt>
    <dd>
    <div>
      <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.threading.ratelimiting.ratelimiter.attemptacquire">RateLimiter.AttemptAcquire(int)</a>
    </div>
    <div>
      <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.threading.ratelimiting.ratelimiter.acquireasync">RateLimiter.AcquireAsync(int, CancellationToken)</a>
    </div>
    <div>
      <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.threading.ratelimiting.ratelimiter.dispose#system-threading-ratelimiting-ratelimiter-dispose">RateLimiter.Dispose()</a>
    </div>
    <div>
      <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.threading.ratelimiting.ratelimiter.disposeasynccore">RateLimiter.DisposeAsyncCore()</a>
    </div>
    <div>
      <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.threading.ratelimiting.ratelimiter.disposeasync">RateLimiter.DisposeAsync()</a>
    </div>
    <div>
      <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.object.equals#system-object-equals(system-object)">object.Equals(object)</a>
    </div>
    <div>
      <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.object.equals#system-object-equals(system-object-system-object)">object.Equals(object, object)</a>
    </div>
    <div>
      <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.object.gethashcode">object.GetHashCode()</a>
    </div>
    <div>
      <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.object.gettype">object.GetType()</a>
    </div>
    <div>
      <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.object.memberwiseclone">object.MemberwiseClone()</a>
    </div>
    <div>
      <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.object.referenceequals">object.ReferenceEquals(object, object)</a>
    </div>
    <div>
      <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.object.tostring">object.ToString()</a>
    </div>
  </dd></dl>






  <h2 class="section" id="constructors">Constructors
</h2>


  <a id="RabbitMQ_Client_ThrottlingRateLimiter__ctor_" data-uid="RabbitMQ.Client.ThrottlingRateLimiter.#ctor*"></a>

  <h3 id="RabbitMQ_Client_ThrottlingRateLimiter__ctor_System_Int32_System_Nullable_System_Int32__" data-uid="RabbitMQ.Client.ThrottlingRateLimiter.#ctor(System.Int32,System.Nullable{System.Int32})">
  ThrottlingRateLimiter(int, int?)
  <a class="header-action link-secondary" title="View source" href="https://github.com/rabbitmq/rabbitmq-dotnet-client/blob/main/projects/RabbitMQ.Client/ThrottlingRateLimiter.cs/#L67"><i class="bi bi-code-slash"></i></a>
  </h3>

  <div class="markdown level1 summary"><p>Initializes a new instance of the <a class="xref" href="RabbitMQ.Client.ThrottlingRateLimiter.html">ThrottlingRateLimiter</a> class with the specified
maximum number of concurrent calls and an optional throttling percentage.</p>
</div>
  <div class="markdown level1 conceptual"></div>

  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public ThrottlingRateLimiter(int maxConcurrentCalls, int? throttlingPercentage = 50)</code></pre>
  </div>

  <h4 class="section">Parameters</h4>
  <dl class="parameters">
    <dt><code>maxConcurrentCalls</code> <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.int32">int</a></dt>
    <dd><p>The maximum number of concurrent operations allowed.</p>
</dd>
    <dt><code>throttlingPercentage</code> <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.int32">int</a>?</dt>
    <dd><p>The percentage of <code class="paramref">maxConcurrentCalls</code> at which throttling is triggered.
Defaults to 50% if not specified.</p>
</dd>
  </dl>












  <h2 class="section" id="fields">Fields
</h2>



  <h3 id="RabbitMQ_Client_ThrottlingRateLimiter_DefaultThrottlingPercentage" data-uid="RabbitMQ.Client.ThrottlingRateLimiter.DefaultThrottlingPercentage">
  DefaultThrottlingPercentage
  <a class="header-action link-secondary" title="View source" href="https://github.com/rabbitmq/rabbitmq-dotnet-client/blob/main/projects/RabbitMQ.Client/ThrottlingRateLimiter.cs/#L52"><i class="bi bi-code-slash"></i></a>
  </h3>

  <div class="markdown level1 summary"><p>The default throttling percentage, which defines the threshold for applying throttling, set to 50%.</p>
</div>
  <div class="markdown level1 conceptual"></div>

  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public const int DefaultThrottlingPercentage = 50</code></pre>
  </div>




  <h4 class="section">Field Value</h4>
  <dl class="parameters">
    <dt><a class="xref" href="https://learn.microsoft.com/dotnet/api/system.int32">int</a></dt>
    <dd></dd>
  </dl>









  <h2 class="section" id="properties">Properties
</h2>


  <a id="RabbitMQ_Client_ThrottlingRateLimiter_IdleDuration_" data-uid="RabbitMQ.Client.ThrottlingRateLimiter.IdleDuration*"></a>

  <h3 id="RabbitMQ_Client_ThrottlingRateLimiter_IdleDuration" data-uid="RabbitMQ.Client.ThrottlingRateLimiter.IdleDuration">
  IdleDuration
  <a class="header-action link-secondary" title="View source" href="https://github.com/rabbitmq/rabbitmq-dotnet-client/blob/main/projects/RabbitMQ.Client/ThrottlingRateLimiter.cs/#L81"><i class="bi bi-code-slash"></i></a>
  </h3>

  <div class="markdown level1 summary"><p>Specifies how long the <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.threading.ratelimiting.ratelimiter">RateLimiter</a> has had all permits available. Used by RateLimiter managers that may want to
clean up unused RateLimiters.</p>
</div>
  <div class="markdown level1 conceptual"></div>

  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public override TimeSpan? IdleDuration { get; }</code></pre>
  </div>





  <h4 class="section">Property Value</h4>
  <dl class="parameters">
    <dt><a class="xref" href="https://learn.microsoft.com/dotnet/api/system.timespan">TimeSpan</a>?</dt>
    <dd></dd>
  </dl>




  <h4 class="section" id="RabbitMQ_Client_ThrottlingRateLimiter_IdleDuration_remarks">Remarks</h4>
  <div class="markdown level1 remarks"><p>Returns <a href="https://learn.microsoft.com/dotnet/csharp/language-reference/keywords/null">null</a> when the <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.threading.ratelimiting.ratelimiter">RateLimiter</a> is in use or is not ready to be idle.</p>
</div>




  <h2 class="section" id="methods">Methods
</h2>


  <a id="RabbitMQ_Client_ThrottlingRateLimiter_AcquireAsyncCore_" data-uid="RabbitMQ.Client.ThrottlingRateLimiter.AcquireAsyncCore*"></a>

  <h3 id="RabbitMQ_Client_ThrottlingRateLimiter_AcquireAsyncCore_System_Int32_System_Threading_CancellationToken_" data-uid="RabbitMQ.Client.ThrottlingRateLimiter.AcquireAsyncCore(System.Int32,System.Threading.CancellationToken)">
  AcquireAsyncCore(int, CancellationToken)
  <a class="header-action link-secondary" title="View source" href="https://github.com/rabbitmq/rabbitmq-dotnet-client/blob/main/projects/RabbitMQ.Client/ThrottlingRateLimiter.cs/#L94"><i class="bi bi-code-slash"></i></a>
  </h3>

  <div class="markdown level1 summary"><p>Method that <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.threading.ratelimiting.ratelimiter">RateLimiter</a> implementations implement for <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.threading.ratelimiting.ratelimiter.acquireasync">AcquireAsync(int, CancellationToken)</a>.</p>
</div>
  <div class="markdown level1 conceptual"></div>

  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">protected override ValueTask&lt;RateLimitLease&gt; AcquireAsyncCore(int permitCount, CancellationToken cancellationToken)</code></pre>
  </div>

  <h4 class="section">Parameters</h4>
  <dl class="parameters">
    <dt><code>permitCount</code> <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.int32">int</a></dt>
    <dd><p>Number of permits to try and acquire.</p>
</dd>
    <dt><code>cancellationToken</code> <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.threading.cancellationtoken">CancellationToken</a></dt>
    <dd><p>Optional token to allow canceling a queued request for permits.</p>
</dd>
  </dl>

  <h4 class="section">Returns</h4>
  <dl class="parameters">
    <dt><a class="xref" href="https://learn.microsoft.com/dotnet/api/system.threading.tasks.valuetask-1">ValueTask</a>&lt;<a class="xref" href="https://learn.microsoft.com/dotnet/api/system.threading.ratelimiting.ratelimitlease">RateLimitLease</a>&gt;</dt>
    <dd><p>A task that completes when the requested permits are acquired or when the requested permits are denied.</p>
</dd>
  </dl>











  <a id="RabbitMQ_Client_ThrottlingRateLimiter_AttemptAcquireCore_" data-uid="RabbitMQ.Client.ThrottlingRateLimiter.AttemptAcquireCore*"></a>

  <h3 id="RabbitMQ_Client_ThrottlingRateLimiter_AttemptAcquireCore_System_Int32_" data-uid="RabbitMQ.Client.ThrottlingRateLimiter.AttemptAcquireCore(System.Int32)">
  AttemptAcquireCore(int)
  <a class="header-action link-secondary" title="View source" href="https://github.com/rabbitmq/rabbitmq-dotnet-client/blob/main/projects/RabbitMQ.Client/ThrottlingRateLimiter.cs/#L85"><i class="bi bi-code-slash"></i></a>
  </h3>

  <div class="markdown level1 summary"><p>Method that <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.threading.ratelimiting.ratelimiter">RateLimiter</a> implementations implement for <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.threading.ratelimiting.ratelimiter.attemptacquire">AttemptAcquire(int)</a>.</p>
</div>
  <div class="markdown level1 conceptual"></div>

  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">protected override RateLimitLease AttemptAcquireCore(int permitCount)</code></pre>
  </div>

  <h4 class="section">Parameters</h4>
  <dl class="parameters">
    <dt><code>permitCount</code> <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.int32">int</a></dt>
    <dd><p>Number of permits to try and acquire.</p>
</dd>
  </dl>

  <h4 class="section">Returns</h4>
  <dl class="parameters">
    <dt><a class="xref" href="https://learn.microsoft.com/dotnet/api/system.threading.ratelimiting.ratelimitlease">RateLimitLease</a></dt>
    <dd></dd>
  </dl>











  <a id="RabbitMQ_Client_ThrottlingRateLimiter_Dispose_" data-uid="RabbitMQ.Client.ThrottlingRateLimiter.Dispose*"></a>

  <h3 id="RabbitMQ_Client_ThrottlingRateLimiter_Dispose_System_Boolean_" data-uid="RabbitMQ.Client.ThrottlingRateLimiter.Dispose(System.Boolean)">
  Dispose(bool)
  <a class="header-action link-secondary" title="View source" href="https://github.com/rabbitmq/rabbitmq-dotnet-client/blob/main/projects/RabbitMQ.Client/ThrottlingRateLimiter.cs/#L125"><i class="bi bi-code-slash"></i></a>
  </h3>

  <div class="markdown level1 summary"><p>Dispose method for implementations to write.</p>
</div>
  <div class="markdown level1 conceptual"></div>

  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">protected override void Dispose(bool disposing)</code></pre>
  </div>

  <h4 class="section">Parameters</h4>
  <dl class="parameters">
    <dt><code>disposing</code> <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.boolean">bool</a></dt>
    <dd></dd>
  </dl>












  <a id="RabbitMQ_Client_ThrottlingRateLimiter_GetStatistics_" data-uid="RabbitMQ.Client.ThrottlingRateLimiter.GetStatistics*"></a>

  <h3 id="RabbitMQ_Client_ThrottlingRateLimiter_GetStatistics" data-uid="RabbitMQ.Client.ThrottlingRateLimiter.GetStatistics">
  GetStatistics()
  <a class="header-action link-secondary" title="View source" href="https://github.com/rabbitmq/rabbitmq-dotnet-client/blob/main/projects/RabbitMQ.Client/ThrottlingRateLimiter.cs/#L83"><i class="bi bi-code-slash"></i></a>
  </h3>

  <div class="markdown level1 summary"><p>Gets a snapshot of the <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.threading.ratelimiting.ratelimiter">RateLimiter</a> statistics if available.</p>
</div>
  <div class="markdown level1 conceptual"></div>

  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public override RateLimiterStatistics? GetStatistics()</code></pre>
  </div>


  <h4 class="section">Returns</h4>
  <dl class="parameters">
    <dt><a class="xref" href="https://learn.microsoft.com/dotnet/api/system.threading.ratelimiting.ratelimiterstatistics">RateLimiterStatistics</a></dt>
    <dd><p>An instance of <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.threading.ratelimiting.ratelimiterstatistics">RateLimiterStatistics</a> containing a snapshot of the <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.threading.ratelimiting.ratelimiter">RateLimiter</a> statistics.</p>
</dd>
  </dl>












</article>

        <div class="contribution d-print-none">
          <a href="https://github.com/rabbitmq/rabbitmq-dotnet-client/blob/main/projects/RabbitMQ.Client/ThrottlingRateLimiter.cs/#L47" class="edit-link">Edit this page</a>
        </div>


      </div>

      <div class="affix">
        <nav id="affix"></nav>
      </div>
    </main>

    <div class="container-xxl search-results" id="search-results"></div>

    <footer class="border-top text-secondary">
      <div class="container-xxl">
        <div class="flex-fill">
          <span>Made with <a href="https://dotnet.github.io/docfx">docfx</a></span>
        </div>
      </div>
    </footer>
  </body>
</html>
